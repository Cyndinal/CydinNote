<!doctype html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
<!--    <link rel="stylesheet" href="/public/styles/index.css" type="text/css"/>-->
    <title  >THE CYDIN NOTE</title>
</head>
<body style="max-width: 700px ;align-content: center
             ;background-color: #a683e3;
             align-items: center;padding-left: 30%">

<main style="align-content: center;max-width: 400px">
    <strong style="color: azure"><%=locals.titleToday%></strong>
    <p><%locals.ITEMS%></p>
    <italic>Total Number of items: &nbsp;<%=locals.total%></italic>
    <%for(let item of ITEMS){%>

    <div >

        <div style="background-color: beige;
        border: ridge darkgrey;max-width: 500px;
        height: 50px;border-radius: 15px;
        margin-top: 1.5rem;padding-top: 25px">
    <form action="/delete" method="POST"  >
        <input
                style="display: flex;position: absolute;font-size: 12px"
                id="delete<%=item.id %>"
                type="checkbox"
                onchange={this.form.submit()}
                name="deleteItem"
                value="<%=item.id %>"
                 />
    </form>

    <span
            id="title<%item.id%>"
            style="background-color: aqua;
            color: black;margin-left: 50px;font-weight: bolder;text-align: center;font-size: 4vh;">
            <%=item.listitem%>
    </span>

        <button
                style="display: inline-flex;position: absolute;margin-left: 20px"
            id="edit<%=item.id%>" onclick="handle('<%=item.id%>')" >
            ✏️
        </button>
     </div>


      <form  style="display: flex" action="/edit" method="post">
          <input
                  type="hidden"
                     name="newItemId"
                        value="<%= item.id %>" >

          <input
                  style="background-color: indianred;padding: 12px 12px 12px 12px;border-radius: 15px ;margin-top: 1rem"
                 id="input<%=item.id%>"
                 type="text"
                 name="newItemTitle"
                 value="<%= item.listitem %>"
                 autocomplete="off"
                 autofocus
                 hidden="true"
          />

          <button
                  id="done<%=item.id%>"
                  type="submit"
                  hidden="true"
                  style="margin-top: 1rem;position: relative;margin-left: 0.5rem;padding: 0 0 0 0"

                  >
                 ✅
           </button>

        </form>

</div>
      <%}%>

        <form action="/add" method="POST" style="display: block;margin-top: 70px" >

        <input  style="width: 300px;height: 3rem;
                       border-radius: 15px;
                       background-color: aquamarine;
                       font-weight: bolder;
                       font-size: 4vh"
                type="text" name="list"  />

        <button type="submit" id="buttoned" >
            ➕
        </button>


    </form>


</main>


<script>
 const handle = (id)=>{
     document.getElementById('done' + id).removeAttribute('hidden')
     document.getElementById('input' + id).removeAttribute('hidden')

     document.getElementById('title' + id).setAttribute('hidden',true)
     document.getElementById('edit' + id).setAttribute('hidden',true)



 }
</script>





</body>
</html>

